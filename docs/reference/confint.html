<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Confidence interval methods for output of resampling — confint • mosaic</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Confidence interval methods for output of resampling — confint" />
<meta property="og:description" content="Methods for confint to compute confidence intervals
on numerical vectors and numerical components of data frames." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mosaic</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Resampling.html">Simulation-based inference with mosaic</a>
    </li>
    <li>
      <a href="../articles/mosaic-resources.html">Resources Related to the mosaic Package</a>
    </li>
    <li>
      <a href="../articles/web-only/GraphicsWithMosaic.html">Graphics with the mosaic and lattice packages</a>
    </li>
    <li>
      <a href="../articles/web-only/LessVolume-MoreCreativity.html">Less Volume, More Creativity -- Getting Started with the mosaic Package</a>
    </li>
    <li>
      <a href="../articles/web-only/ggformula-lattice.html">ggformula/lattice Comparison</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ProjectMOSAIC/mosaic/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Confidence interval methods for output of resampling</h1>
    <small class="dont-index">Source: <a href='https://github.com/ProjectMOSAIC/mosaic/blob/master/R/confint.R'><code>R/confint.R</code></a>, <a href='https://github.com/ProjectMOSAIC/mosaic/blob/master/R/mplot.R'><code>R/mplot.R</code></a></small>
    <div class="hidden name"><code>confint.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Methods for <code>confint</code> to compute confidence intervals
on numerical vectors and numerical components of data frames.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for numeric</span>
<span class='fu'>confint</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>parm</span>,
  level <span class='op'>=</span> <span class='fl'>0.95</span>,
  <span class='va'>...</span>,
  method <span class='op'>=</span> <span class='st'>"percentile"</span>,
  margin.of.error <span class='op'>=</span> <span class='st'>"stderr"</span> <span class='op'>%in%</span> <span class='va'>method</span> <span class='op'>==</span> <span class='st'>"stderr"</span>
<span class='op'>)</span>

<span class='co'># S3 method for do.tbl_df</span>
<span class='fu'>confint</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>parm</span>,
  level <span class='op'>=</span> <span class='fl'>0.95</span>,
  <span class='va'>...</span>,
  method <span class='op'>=</span> <span class='st'>"percentile"</span>,
  margin.of.error <span class='op'>=</span> <span class='st'>"stderr"</span> <span class='op'>%in%</span> <span class='va'>method</span>,
  df <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>

<span class='co'># S3 method for do.data.frame</span>
<span class='fu'>confint</span><span class='op'>(</span>
  <span class='va'>object</span>,
  <span class='va'>parm</span>,
  level <span class='op'>=</span> <span class='fl'>0.95</span>,
  <span class='va'>...</span>,
  method <span class='op'>=</span> <span class='st'>"percentile"</span>,
  margin.of.error <span class='op'>=</span> <span class='st'>"stderr"</span> <span class='op'>%in%</span> <span class='va'>method</span>,
  df <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>

<span class='co'># S3 method for data.frame</span>
<span class='fu'>confint</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>parm</span>, level <span class='op'>=</span> <span class='fl'>0.95</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for summary.lm</span>
<span class='fu'>confint</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>parm</span>, level <span class='op'>=</span> <span class='fl'>0.95</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>and R object</p></td>
    </tr>
    <tr>
      <th>parm</th>
      <td><p>a vector of parameters</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>a confidence level</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>a character vector of methods to use for creating confidence
intervals.  Choices are "percentile" (or "quantile") which is the default,
"stderr" (or "se"), "bootstrap-t", and
"reverse" (or "basic"))</p></td>
    </tr>
    <tr>
      <th>margin.of.error</th>
      <td><p>if true, report intervals as a center and margin of error.</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>degrees for freedom. This is required when <code>object</code> was produced using
<code>link{do}</code> when
using the standard error to compute the confidence interval since
typically this information is not recorded in these objects.  The default (<code>Inf</code>)
uses a normal critical value rather than a one derived from a t-distribution.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>When applied to a data frame, returns a data frame giving the
confidence interval for each variable in the data frame using
<code>t.test</code> or <code>binom.test</code>, unless the data frame was produced using <code>do</code>, in which case
it is assumed that each variable contains resampled statistics that serve as an estimated sampling
distribution from which a confidence interval can be computed using either a central proportion
of this distribution or using the standard error as estimated by the standard deviation of the
estimated sampling distribution.  For the standard error method, the user must supply the correct
degrees of freedom for the t distribution since this information is typically not available in
the output of <code><a href='do.html'>do()</a></code>.</p>
<p>When applied to a numerical vector, returns a vector.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The methods of producing confidence intervals from bootstrap distributions are currently
quite naive.  In particular, when using the standard error, assistance may be required with the
degrees of freedom, and it may not be possible to provide a correct value in all situations.
None of the methods include explicit bias correction.
Let \(q_a\) be the \(a\) quantile of the bootstrap distribution,
let \(t_a, df\) be the \(a\) quantile of the t distribution with \(df\)
degrees of freedom,
let \(SE_b\) be the standard deviation of the bootstrap distribution,
and let \(\hat{\theta}\) be the estimate computed from the original data.
Then the confidence intervals with confidence level \(1 - 2a\) are</p><dl>
<dt>quantile</dt><dd><p>\((q_a, q_{1-a}) \)</p></dd>
<dt>reverse</dt><dd><p>\(( 2 \hat{\theta} - q_{1-a}, 2\hat{\theta} - q_{a} )\)</p></dd>
<dt>stderr</dt><dd><p>\((\hat{\theta} - t_{1-a,df} SE_b, \hat{\theta} + t_{1-a,df} SE_b) \).
When <code>df</code> is not provided,
at attempt is made to determine an appropriate value, but this should be double checked.
In particular, missing data an lead to unreliable results.</p></dd>
The bootstrap-t confidence interval is computed much like the reverse confidence interval
but the bootstrap t distribution is used in place of a theoretical t distribution.
This interval has much better properties than the reverse (or basic) method, which
is here for comparison purposes only and is not recommended.  The t-statistic
is computed from a mean, a standard deviation, a sample size which much be named
"mean", "sd", and "n" as they are when using <a href='mean_.html'>favstats()</a>.

</dl>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Tim C. Hesterberg (2015): What Teachers Should Know about the Bootstrap:
Resampling in the Undergraduate Statistics Curriculum,
The American Statistician,
<a href='https://www.tandfonline.com/doi/full/10.1080/00031305.2015.1089789'>https://www.tandfonline.com/doi/full/10.1080/00031305.2015.1089789</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/ProjectMOSAIC/mosaicData'>mosaicData</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>bootstrap</span> <span class='op'>&lt;-</span> <span class='fu'><a href='do.html'>do</a></span><span class='op'>(</span><span class='fl'>500</span><span class='op'>)</span> <span class='op'>*</span> <span class='fu'><a href='diffmean.html'>diffmean</a></span><span class='op'>(</span> <span class='va'>age</span> <span class='op'>~</span> <span class='va'>sex</span>, data <span class='op'>=</span> <span class='fu'><a href='resample.html'>resample</a></span><span class='op'>(</span><span class='va'>HELPrct</span><span class='op'>)</span> <span class='op'>)</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap</span><span class='op'>)</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap</span>, method <span class='op'>=</span> <span class='st'>"percentile"</span><span class='op'>)</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap</span>, method <span class='op'>=</span> <span class='st'>"boot"</span><span class='op'>)</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap</span>, method <span class='op'>=</span> <span class='st'>"se"</span>, df <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>HELPrct</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap</span>, margin.of.error <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap</span>, margin.of.error <span class='op'>=</span> <span class='cn'>TRUE</span>, level <span class='op'>=</span> <span class='fl'>0.99</span>, 
    method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"se"</span>, <span class='st'>"perc"</span><span class='op'>)</span> <span class='op'>)</span>
    
  <span class='co'># bootstrap t method requires both mean and sd</span>
  <span class='va'>bootstrap2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='do.html'>do</a></span><span class='op'>(</span><span class='fl'>500</span><span class='op'>)</span> <span class='op'>*</span> <span class='fu'><a href='mean_.html'>favstats</a></span><span class='op'>(</span><span class='fu'><a href='resample.html'>resample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> 
  <span class='fu'>confint</span><span class='op'>(</span><span class='va'>bootstrap2</span>, method <span class='op'>=</span> <span class='st'>"boot"</span><span class='op'>)</span>
<span class='op'>}</span>
</div><div class='output co'>#&gt; <span class='message'>Using parallel package.</span>
#&gt; <span class='message'>  * Set seed with set.rseed().</span>
#&gt; <span class='message'>  * Disable this message with options(`mosaic:parallelMessage` = FALSE)</span></div><div class='output co'>#&gt; <span class='warning'>Warning: confint: Unable to compute any of the desired CIs</span></div><div class='output co'>#&gt; <span class='message'>Using parallel package.</span>
#&gt; <span class='message'>  * Set seed with set.rseed().</span>
#&gt; <span class='message'>  * Disable this message with options(`mosaic:parallelMessage` = FALSE)</span></div><div class='output co'>#&gt;   name    lower    upper level      method estimate
#&gt; 1 mean 3.089873 7.286781  0.95 bootstrap-t      5.5</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>width</span> <span class='op'>~</span> <span class='va'>length</span> <span class='op'>*</span> <span class='va'>sex</span>, data <span class='op'>=</span> <span class='va'>KidsFeet</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>confint</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                   2.5 %    97.5 %
#&gt; (Intercept)  0.09816469 7.6059964
#&gt; length       0.06326171 0.3619858
#&gt; sexG        -5.70117633 4.4534183
#&gt; length:sexG -0.18914537 0.2207867</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Randall Pruim, Daniel T. Kaplan, Nicholas J. Horton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


